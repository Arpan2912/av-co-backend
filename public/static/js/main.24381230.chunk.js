(this["webpackJsonpcontact-book-frontend"]=this["webpackJsonpcontact-book-frontend"]||[]).push([[0],{121:function(e,a,t){e.exports=t(244)},13:function(e,a){e.exports={routes:{API_URL:"http://localhost:3002/",SIGNIN:"auth/signin",SIGNUP:"auth/signup",ADD_CONTACT:"contact/add-contact",UPDATE_CONTACT:"contact/update-contact",GET_CONTACTS:"contact/get-contacts",UPLOAD_EXCEL:"contact/upload-excel",ADD_STOCK:"stock/add-stock",UPDATE_STOCK:"stock/update-stock",GET_STOCKS:"stock/get-stocks",DELETE_STOCKS:"stock/delete-stock",ADD_TRANSACTION:"transaction/add-transaction",ADD_OTHER_TRANSACTION:"transaction/add-other-transaction",UPDATE_TRANSACTION:"transaction/update-transaction",GET_TRANSACTIONS:"transaction/get-transactions",GET_CLOSE_AMOUNT_TODAY:"transaction/get-close-amount-today",ADD_OPENING_BALANCE:"opening-balance/add-opening-balance",UPDATE_OPENING_BALANCE:"opening-balance/update-opening-balance",GET_TODAY_OPENING_BALANCE:"opening-balance/get-today-opening-balance",GET_STOCK_AND_AMT_WITH_DALAL:"dashboard/get-stock-and-amount-with-dalal",GET_ACCOUNT_SUMMARY:"dashboard/get-account-summary"}}},130:function(e,a,t){},150:function(e,a,t){},151:function(e,a,t){},172:function(e,a,t){},181:function(e,a,t){},238:function(e,a,t){},239:function(e,a,t){},240:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},241:function(e,a,t){},244:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(25),r=t.n(o),c=t(31),s=(t(130),t(7)),u=t(8),i=t(12),d=t(11),m=t(30),h=t(249),p=t(250),g=t(33),v=t(119),E=t(75),f=t.n(E),y=t(108),S=t.n(y),C=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"removeToken",value:function(){return localStorage.removeItem("token")}},{key:"setUserDetail",value:function(e){var a=JSON.stringify(e);localStorage.setItem("user",a)}},{key:"getUserDetail",value:function(){var e=localStorage.getItem("user");return JSON.parse(e)}},{key:"removeUserDetail",value:function(){return localStorage.removeItem("user")}}]),e}(),b=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t=t||{},n=n||{},(l=l||{})["content-type"]||(l["content-type"]="application/json"),"signin"!==a&&"signup"!==a&&"forgot-password"!==a){var o=C.getToken();l.Authorization="Bearer ".concat(o)}var r={method:e,headers:l,params:t,url:a};if("POST"!==e&&"PUT"!==e||"application/x-www-form-urlencoded"!==l["content-type"])if("POST"!==e&&"PUT"!==e||"multipart/form-data"!==l["content-type"])"POST"!==e&&"PUT"!==e||(r.data=n);else{l["content-type"]="multipart/form-data";for(var c=new FormData,s=Object.keys(n),u=0;u<s.length;u++)c.append(s[u],n[s[u]]);r.data=c}else r.data=S.a.stringify(n);return f()(r)},P=t(13),k=P.routes.API_URL,O=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"signin",value:function(e){return b("POST","".concat(k).concat(P.routes.SIGNIN),null,e,null)}}]),e}(),w=function(e){var a=e.component,t=Object(v.a)(e,["component"]),n=C.getToken(),o=!1;return o=!!n,l.a.createElement(g.b,Object.assign({},t,{render:function(e){return!0===o?l.a.createElement(a,e):l.a.createElement(g.a,{to:{pathname:"/"}})}}))},A=t(251),M=t(252),D=t(253),N=t(254),T=t(255),I=t(256),_=t(257),j=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"emailValidator1",value:function(e){return e&&e.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?null:{error:!0,errorMsg:"Email is not valid"}}},{key:"emailValidator",value:function(e){return null===e.value||""===e.value||e.value&&e.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(e.invalidEmail=!1,e):(e.invalidEmail=!0,e)}},{key:"numberValidatior",value:function(e){return e?0===(e?e.trim():"").length?{error:!0,errorMsg:"Value should not be empty"}:0===e?{error:!0,errorMsg:"Value should not 0"}:/(^[0-9]+\.([0-9])+|^[0-9]+)$/.test(e)?null:{error:!0,errorMsg:"Value you entered is incorrect"}:{error:!0,errorMsg:"Value should not be empty"}}},{key:"notNullValidator",value:function(e){return null===e.value||""===e.value||void 0===e.value?(e.nullValue=!0,e):(e.nullValue=!1,e)}},{key:"validatePhoneNumber",value:function(e){var a=e.value;if(null!==a&&""!==a){if(10!==a.length)return e.invalidPhone=!0,e;a.match(/^[0-9]*$/)?e.invalidPhone=null:e.invalidPhone=!0}else e.invalidPhone=null;return e}}]),e}(),x=function(e){return function(a){return console.log("fetch posts"),a({type:"UPDATE_HEADER_MENUS",payload:e}),Promise.resolve()}},V=(t(150),function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={controls:{phone:{value:"",valid:null,touched:!1,nullValue:null},password:{value:"",valid:null,touched:!1,nullValue:null}}},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l=e.state.controls;l[t].value=n,l[t].touched=!0,e.setState({controls:l})},e.handleValidation=function(a,t){var n=e.state,l=n.controls,o=n.isFormValid,r=l.phone,c=l.password;return(!0===a||!0===r.touched||t)&&((r=j.notNullValidator(r)).valid=!r.nullValue,(t||r.touched)&&!1===r.valid?r.showErrorMsg=!0:r.showErrorMsg=!1),(!0===a||!0===c.touched||t)&&((c=j.notNullValidator(c)).valid=!c.nullValue,(t||c.touched)&&!1===c.valid?c.showErrorMsg=!0:c.showErrorMsg=!1),o=!0===r.valid&&!0===c.valid,console.log("controls",l),e.setState({controls:l,isFormValid:o}),o},e.login=function(){var a=e.state.controls,t=a.phone,n=a.password;if(!1!==e.handleValidation(!1,!0)){var l={phone:t.value,password:n.value};O.signin(l).then((function(a){var t=a.data.data.token,n={type:a.data.data.userType};C.setUserDetail(n),C.setToken(t),e.props.updateHeaderMenus("login"),e.props.history.push("/home")})).catch((function(e){}))}},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){C.getToken()&&this.props.history.push("/contact")}},{key:"render",value:function(){var e=this.state.controls,a=e.password,t=e.phone;return l.a.createElement("div",{id:"login"},l.a.createElement(h.a,null,l.a.createElement(p.a,{xl:"5"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,l.a.createElement(D.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"phone"},"Phone Number"),l.a.createElement(I.a,{type:"text",id:"phone",name:"phone",value:t.value,onChange:this.handleInputChange}),t.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter phone number")),l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"password"},"Password"),l.a.createElement(I.a,{type:"password",id:"password",name:"password",value:a.value,onChange:this.handleInputChange}),a.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter password")),l.a.createElement(_.a,{onClick:this.login},"Login"))))),l.a.createElement(p.a,{sm:"1"})))}}]),t}(n.Component)),U=Object(c.b)(null,{updateHeaderMenus:x})(V),L=(t(151),function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={},e.logout=function(){C.removeToken(),e.props.updateHeaderMenus("logout"),e.props.history.push("/")},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.logout()}},{key:"render",value:function(){return l.a.createElement("div",{id:"login"})}}]),t}(n.Component)),B=Object(c.b)(null,{updateHeaderMenus:x})(L),R=t(261),F=t(19),G=t.n(F),z=t(34),H=t(10),W=t.n(H),J=(t(172),function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).findPageRange=function(e){var a=n.props.pageSize,t=void 0===a?10:a,l=(e-1)*t+1,o=e*t;o>n.props.totalRecords&&(o=(e-1)*t+n.props.totalRecords%t);return"".concat(l,"-").concat(o)};var l=e.margin,o=e.page,r=e.totalRecords,c=e.pageSize,u=Math.ceil(r/c),i=o>l?o-l:1,d=o+l>u?u:o+l;return n.state={startPage:i,endPage:d,count:u},n.onPageChange=n.onPageChange.bind(Object(z.a)(n)),n.goFirstPage=n.goFirstPage.bind(Object(z.a)(n)),n.goLastPage=n.goLastPage.bind(Object(z.a)(n)),n.goPrevPage=n.goPrevPage.bind(Object(z.a)(n)),n.goNextPage=n.goNextPage.bind(Object(z.a)(n)),n}return Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(console.log("newProps",e),e!==this.props){var a=e.margin,t=e.page,n=e.totalRecords,l=e.pageSize,o=Math.ceil(n/l);console.log("count",o);var r=t>a?t-a:1,c=t+a>o?o:t+a;this.setState({startPage:r,endPage:c,count:o})}}},{key:"onPageChange",value:function(e){var a=Array.prototype.indexOf.call(e.target.parentNode.children,e.target);this.props.onPageChange(a+this.state.startPage)}},{key:"goFirstPage",value:function(){this.props.onPageChange(1)}},{key:"goLastPage",value:function(){this.props.onPageChange(this.state.count)}},{key:"goPrevPage",value:function(){this.props.onPageChange(this.props.page-1)}},{key:"goNextPage",value:function(){this.props.onPageChange(this.props.page+1)}},{key:"render",value:function(){var e=this.state,a=e.startPage,t=e.endPage,n=e.count;console.log("count",n);var o=this.props,r=o.page,c=o.margin,s=[],u=this.findPageRange(this.props.page),i=r-c>1?l.a.createElement("div",{className:"pagination-button pagination-go-first",onClick:this.goFirstPage,role:"presentation"},"1"):null,d=r+c<n?l.a.createElement("div",{className:"pagination-button pagination-go-last",onClick:this.goLastPage,role:"presentation"},n):null,m=1===r?null:l.a.createElement("div",{className:"pagination-button",onClick:this.goPrevPage,role:"presentation"},l.a.createElement(G.a,{icon:"ios-arrow-back",fontSize:"24px",color:"#757575"})),h=r===n?null:l.a.createElement("div",{className:"pagination-button",onClick:this.goNextPage,role:"presentation"},l.a.createElement(G.a,{icon:"ios-arrow-forward",fontSize:"24px",color:"#757575"}));if(1!==t)for(var p=a;p<=t;p++)s.push(l.a.createElement("li",{key:p,onClick:this.onPageChange,role:"presentation",className:W()("pagination-list-item","pagination-button",{active:p===this.props.page})},p));return l.a.createElement("div",{id:"pagination-container"},l.a.createElement("div",{id:"pagination"},l.a.createElement("div",{style:{lineHeight:"30px"}},l.a.createElement("span",{className:"showing-text"},"Showing"),l.a.createElement("span",{className:"range"}," ",u)),m,i,l.a.createElement("ul",{id:"pagination-list"},s),d,h))}}]),t}(n.Component)),K=P.routes.API_URL,Y=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"addContact",value:function(e){return b("POST","".concat(K).concat(P.routes.ADD_CONTACT),null,e,null)}},{key:"updateContact",value:function(e){return b("POST","".concat(K).concat(P.routes.UPDATE_CONTACT),null,e,null)}},{key:"getContacts",value:function(e,a,t,n,l){var o="?";return e&&(o+="page=".concat(e,"&")),a&&(o+="limit=".concat(a,"&")),t&&(o+="search=".concat(t,"&")),n&&(o+="downloadExcel=".concat(n,"&")),b("POST","".concat(K).concat(P.routes.GET_CONTACTS).concat(o),null,l,null)}},{key:"uploadExcel",value:function(e){return function(e,a){var t=new FormData;return t.append("csv",a,a.name),f.a.post(e,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(C.getToken())}})}("".concat(K).concat(P.routes.UPLOAD_EXCEL),e)}}]),e}(),X=t(263),$=t(259),q=t(260),Q=t(258),Z=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"spinner-middle-con"},l.a.createElement(Q.a,{className:"spinner-middle"}))}}]),t}(n.Component),ee=t(113),ae=t.n(ee),te=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"openAlert",value:function(e,a,t){ae()({text:a,dangerMode:"success"!==t,button:{text:"OK",value:!1,visible:!1,className:"",closeModal:!0}})}}]),e}(),ne=!1,le=[{key:"Buyer",value:"buyer"},{key:"Seller",value:"seller"},{key:"Dalal",value:"dalal"}],oe={name:{value:"",valid:null,touched:!1,nullValue:null},email:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},mobile1:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},mobile2:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},city:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},address:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},company:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},type:{value:"dalal",valid:null,touched:!1,nullValue:null,invalidPassword:null}},re=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).state={controls:JSON.parse(JSON.stringify(oe)),isLoading:!1},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l=e.state.controls;l[t].value=n,l[t].touched=!0,e.setState({controls:l})},e.handleValidation=function(a,t){var n=e.state,l=n.controls,o=n.isFormValid,r=l.name;return(!0===a||!0===r.touched||t)&&((r=j.notNullValidator(r)).valid=!r.nullValue,(t||r.touched)&&!1===r.valid?r.showErrorMsg=!0:r.showErrorMsg=!1),o=!0===r.valid,console.log("isFormValid",o),console.log("controls",l),e.setState({controls:l,isFormValid:o}),o},e.saveDetail=function(){var a=e.state.controls,t=a.name,n=a.email,l=a.address,o=a.mobile1,r=a.mobile2,c=a.city,s=a.company,u=a.type;if(!0!==ne&&!1!==e.handleValidation(!1,!0)){console.log("controls",a);var i={name:t.value,email:n.value,mobile1:o.value,mobile2:r.value,address:l.value,city:c.value,company:s.value,type:u.value};e.setState({isLoading:!0}),ne=!0,Y.addContact(i).then((function(a){var t=a.data&&a.data.message?a.data.message:null;t&&te.openAlert("Person",t,"success"),e.setState({isLoading:!1}),ne=!1,e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1}),ne=!1}))}},e.updateContact=function(){var a=e.props.contactData,t=e.state.controls,n=t.name,l=t.email,o=t.address,r=t.mobile1,c=t.mobile2,s=t.city,u=t.company,i=t.type;if(!1!==e.handleValidation(!1,!0)){console.log("controls",t);var d={name:n.value,email:l.value,mobile1:r.value,mobile2:c.value,address:o.value,city:s.value,company:u.value,type:i.value,contactId:a.uuid};e.setState({isLoading:!0}),Y.updateContact(d).then((function(a){var t=a.data&&a.data.message?a.data.message:null;e.setState({isLoading:!1}),t&&te.openAlert("Person",t,"success"),e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1});var t=a.response&&a.response.data&&a.response.data.message?a.response.data.message:"Something went wrong";te.openAlert("Person",t,"error")}))}},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.contactData;if(console.log("contactData",e),e){var a=this.state.controls,t=a.name,n=a.email,l=a.address,o=a.mobile1,r=a.mobile2,c=a.city,s=a.company,u=a.type;t.value=e.name,o.value=e.mobile1,r.value=e.mobile2,n.value=e.email,l.value=e.address,c.value=e.city,s.value=e.company,u.value=e.type,this.setState({controls:a})}}},{key:"render",value:function(){var e=this.props.contactData,a=this.state,t=a.controls,n=a.isLoading,o=t.name,r=t.email,c=t.address,s=t.mobile1,u=t.mobile2,i=t.city,d=t.company,m=t.type;return l.a.createElement(X.a,{isOpen:this.props.show,toggle:this.props.closeModal},l.a.createElement($.a,{toggle:this.props.closeModal},"Add Person"),l.a.createElement(q.a,null,n&&l.a.createElement(Z,null),l.a.createElement(D.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"name"},"Name"),l.a.createElement(I.a,{type:"text",id:"name",name:"name",value:o.value,onChange:this.handleInputChange}),o.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter name")))),l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"mobile1"},"Mobile Number 1"),l.a.createElement(I.a,{type:"number",id:"mobile1",name:"mobile1",value:s.value,onChange:this.handleInputChange}),s.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter phone number"))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"mobile2"},"Mobile Number 2"),l.a.createElement(I.a,{type:"number",id:"mobile2",name:"mobile2",value:u.value,onChange:this.handleInputChange}),u.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter phone number")))),l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"email"},"Email"),l.a.createElement(I.a,{type:"text",id:"email",name:"email",value:r.value,onChange:this.handleInputChange}),r.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter valid email address"))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"company"},"company"),l.a.createElement(I.a,{type:"text",id:"company",name:"company",value:d.value,onChange:this.handleInputChange}),d.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter valid company name")))),l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"address"},"Address"),l.a.createElement(I.a,{type:"text",id:"address",name:"address",value:c.value,onChange:this.handleInputChange}),c.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter  address")),l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"city"},"City"),l.a.createElement(I.a,{type:"text",id:"city",name:"city",value:i.value,onChange:this.handleInputChange}),i.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter valid city name"))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"type"},"Type"),l.a.createElement("select",{name:"type",onChange:this.handleInputChange,value:m.value},le.map((function(e){return l.a.createElement("option",{value:e.value},e.key)})))))),l.a.createElement(_.a,{onClick:e?this.updateContact:this.saveDetail},"Save"))))}}]),t}(n.Component),ce=t(118),se=null,ue=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={file:null,errorMessage:""},e.uploadFile=function(){e.state.file?Y.uploadExcel(e.state.file).then((function(a){e.props.toggle(!0),console.log("data",a)})).catch((function(e){console.error("e",e)})):e.setState({errorMessage:"Please select file"})},e.onDropFile=function(a){se=a[0],e.setState({file:se})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log("opening modal")}},{key:"render",value:function(){var e=this;return l.a.createElement(X.a,{isOpen:this.props.show,toggle:function(){return null}},l.a.createElement($.a,null,l.a.createElement("div",null,l.a.createElement("span",null,"Upload Excel"),l.a.createElement("span",{style:{right:"10px",position:"absolute"},onClick:this.props.closeModal},"X"))),l.a.createElement(q.a,null,l.a.createElement(ce.a,{onDrop:function(a){return e.onDropFile(a)}},(function(e){var a=e.getRootProps,t=e.getInputProps;return l.a.createElement("section",null,l.a.createElement("div",Object.assign({},a(),{style:{height:"300px",border:"1px solid black",marginBottom:"20px"}}),l.a.createElement("input",t()),l.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")))})),this.state.file&&l.a.createElement("div",null,this.state.file.name),this.state.errorMessage&&!this.state.file&&l.a.createElement("div",{className:"error"},"* ",this.state.errorMessage),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(_.a,{style:{width:"100%",backgroundColor:"#ab3b60"},onClick:this.uploadFile.bind(this)},"Upload "))))}}]),t}(n.Component),ie={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"};function de(e){var a=(e=new Date(e)).getDate(),t=e.getMonth()+1,n=e.getFullYear().toString();return n=function(e){e||(e=(new Date).getFullYear().toString());return"'"+e.slice(2)}(n),a<10&&(a="0"+a),t=ie[t],"".concat(a," ").concat(t).concat(n)}function me(e){var a=document.createElement("a");a.href=e,a.setAttribute("download","sample.xlsx"),a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}function he(e){return Object.keys(e).reduce((function(a,t,n){var l,o;return l=0===n?"?":"&",t=encodeURIComponent(t),e[t]&&(o=encodeURIComponent(e[t])),[a,l,t,"=",o].join("")}),"")}function pe(e,a){var t="Something went wrong";a&&a.response&&a.response.data&&a.response.data.message&&(t=a.response.data.message),te.openAlert(e,t,"failure")}t(181);var ge=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={contacts:[],downloadExcelFields:["all"],selectedContactToUpdate:null,isAddContactModalOpen:!1,isUploadContactModalOpen:!1,page:1,totalRecords:0,search:null,controls:{downloadCheckbox:{value:["all"],valid:null,touched:!1,required:!0,showErrorMsg:!1}}},e.getContacts=function(a,t,n){var l={downloadExcelFields:e.state.controls.downloadCheckbox.value};Y.getContacts(a,10,t,n,l).then((function(a){if(console.log(a.data),n)a.data.data&&a.data.data.file&&me(a.data.data.file);else{var t=a.data.data.contacts,l=a.data.data.count;e.setState({contacts:t,totalRecords:l})}})).catch((function(e){}))},e.openAddContactModal=function(a){e.setState({isAddContactModalOpen:!0,selectedContactToUpdate:a})},e.closeAddContactModal=function(a){console.log("closing modal"),e.setState({isAddContactModalOpen:!1,selectedContactToUpdate:null}),a&&e.getContacts(e.state.page)},e.openTransactions=function(a){e.props.history.push({pathname:"/transactions",contactData:a})},e.openUploadContactModal=function(){e.setState({isUploadContactModalOpen:!0})},e.closeUploadContactModal=function(a){e.setState({isUploadContactModalOpen:!1}),a&&e.getContacts(e.state.page)},e.handlePageChange=function(a){e.setState({page:a}),e.getContacts(a,e.state.search)},e.handleSearchInput=function(a){var t=a.target.value;e.setState({search:t}),e.searchContactData(t)},e.searchContactData=function(a){e.setState({page:1}),e.getContacts(1,a)},e.downloadExcel=function(){e.getContacts(e.state.page,e.state.search,!0)},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getContacts(this.state.page)}},{key:"render",value:function(){var e=this,a=this.state,t=a.contacts,n=a.selectedContactToUpdate,o=a.isAddContactModalOpen,r=a.page,c=a.totalRecords,s=a.search,u=a.controls,i=a.isUploadContactModalOpen,d=(u.downloadCheckbox,t.map((function(a){return l.a.createElement("tr",null,l.a.createElement("td",null,a.name),l.a.createElement("td",null,l.a.createElement("div",null,a.mobile1),l.a.createElement("div",null,a.mobile2)),l.a.createElement("td",null,a.email),l.a.createElement("td",null,a.address),l.a.createElement("td",null,a.city),l.a.createElement("td",null,a.company),l.a.createElement("td",null,a.type),l.a.createElement("td",null,l.a.createElement("span",{onClick:e.openAddContactModal.bind(e,a)},l.a.createElement(G.a,{icon:"md-create",fontSize:"16px",color:"#fdbb1f"})),"\xa0",l.a.createElement("span",{onClick:e.openTransactions.bind(e,a),title:"Transactions"},l.a.createElement(G.a,{icon:"md-git-compare",fontSize:"16px",color:"#fdbb1f"}))))})));return l.a.createElement("div",{id:"contact"},o&&l.a.createElement(re,{show:o,closeModal:this.closeAddContactModal,contactData:n}),i&&l.a.createElement(ue,{show:i,closeModal:this.closeUploadContactModal}),l.a.createElement(h.a,null,l.a.createElement(p.a,{xl:"12"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"4"},l.a.createElement(I.a,{name:"search",id:"search",type:"text",placeholder:"Enter person name,phone numeber or company",onChange:this.handleSearchInput,value:s})),l.a.createElement(p.a,{className:"text-align-right"},l.a.createElement("span",{className:"download-link",onClick:this.openAddContactModal.bind(this,null)},"Add Contact"),"\xa0\xa0",l.a.createElement("span",{className:"download-link",onClick:this.openUploadContactModal},"Upload Contact"))),l.a.createElement(R.a,{className:"width-100 margin-top-10"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Phone"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Address"),l.a.createElement("th",null,"City"),l.a.createElement("th",null,"Company"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,d)),l.a.createElement(J,{margin:2,page:r,pageSize:10,totalRecords:c,onPageChange:this.handlePageChange}))))))}}]),t}(n.Component),ve=P.routes.API_URL,Ee=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"addStock",value:function(e){return b("POST","".concat(ve).concat(P.routes.ADD_STOCK),null,e,null)}},{key:"updateStock",value:function(e){return b("POST","".concat(ve).concat(P.routes.UPDATE_STOCK),null,e,null)}},{key:"deleteStock",value:function(e){var a="?";return e&&(a+="u=".concat(e,"&")),b("DELETE","".concat(ve).concat(P.routes.DELETE_STOCKS).concat(a),null,null,null)}},{key:"getStocks",value:function(e,a,t,n,l,o){var r="?";return e&&(r+="page=".concat(e,"&")),a&&(r+="limit=".concat(a,"&")),t&&(r+="search=".concat(t,"&")),o&&(r+="status=".concat(o,"&")),n&&(r+="downloadExcel=".concat(n,"&")),b("POST","".concat(ve).concat(P.routes.GET_STOCKS).concat(r),null,l,null)}}]),e}(),fe=t(262),ye=t(49),Se=t.n(ye),Ce=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={contacts:[],personName:null,showPersonList:!1,controls:{person:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null}}},e.handleClickOutside=function(a){var t=e.props.forwardedRef;t.current&&!t.current.contains(a.target)&&e.setState({showPersonList:!1})},e.handlePersonSearchChange=function(a){var t=e.state,n=t.personName,l=t.controls,o=l.person;n=a.target.value,o.value=null,e.setState({personName:n,controls:l},(function(){e.getContacts()}))},e.openPersonToggle=function(){e.state.showPersonList;e.setState({showPersonList:!0})},e.onSelectPerson=function(a){var t=e.props.controlName,n=e.state,l=n.personName,o=(n.showPersonList,n.controls),r=o.person,c=a.name,s=a.uuid;l=c,r.value=s,e.props.getSelectedPersonControl(r,t),e.setState({personName:l,controls:o,showPersonList:!1})},e.getContacts=function(a){var t=e.state.personName,n=e.props.person;Y.getContacts(1,1e6,t,!1).then((function(a){if(console.log("data",a),a.data&&a.data.data&&a.data.data.contacts&&(e.setState({contacts:a.data.data.contacts}),n.value)){var l=a.data.data.contacts.findIndex((function(e){return e.uuid===n.value}));t=a.data.data.contacts[l].name,e.setState({personName:t})}})).catch((function(e){console.log("e",e)}))},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.controls,a=this.props.person;e.person=a,this.setState({controls:e}),this.getContacts(!0),document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e=this,a=this.state,t=a.personName,n=a.showPersonList,o=a.controls,r=a.contacts,c=(o.person,this.props.forwardedRef);return l.a.createElement("div",{ref:c},l.a.createElement(I.a,{type:"text",name:"person",autoComplete:"off",value:t,onChange:this.handlePersonSearchChange.bind(this),onFocus:this.openPersonToggle.bind(this)}),n&&l.a.createElement("div",{className:"p-list"},r.map((function(a,t){return l.a.createElement(_.a,{className:"list-button",onClick:e.onSelectPerson.bind(e,a)},a.name)}))))}}]),t}(n.Component),be=l.a.forwardRef((function(e,a){return l.a.createElement(Ce,Object.assign({},e,{forwardedRef:a}))})),Pe=!1,ke=[{key:"Current Stock",value:"current-stock"},{key:"Jangad",value:"jangad"},{key:"Sold",value:"sold"}],Oe=[{key:"Carat",value:"carat"},{key:"Total Price",value:"total_price"}],we={stockId:{value:"",valid:null,touched:!1,nullValue:null},status:{value:"current-stock",valid:null,touched:!1,nullValue:null,invalidPassword:null},weight:{value:null,valid:null,touched:!1,nullValue:null,invalidPassword:null},buyPricePer:{value:"carat",valid:null,touched:!1,nullValue:null,invalidPassword:null},sellPricePer:{value:"carat",valid:null,touched:!1,nullValue:null,invalidPassword:null},buyDate:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},buyPrice:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},sellDate:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},sellPrice:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},buyPersonId:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},sellPersonId:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null}},Ae=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).state={controls:JSON.parse(JSON.stringify(we)),contacts:[],isLoading:!1},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l=e.state.controls;l[t].value=n,l[t].touched=!0,e.setState({controls:l})},e.handleDateChange=function(a,t){console.log("e",t),console.log("controlName",a);var n=e.state.controls,l=n[a];l.value=t,l.touched=!0,e.setState({controls:n})},e.handleValidation=function(a,t){var n=e.state.controls,l=n.stockId,o=n.weight,r=n.buyDate,c=n.buyPrice,s=n.sellDate,u=n.sellPrice,i=n.buyPersonId,d=n.sellPersonId,m=n.status;(!0===a||!0===l.touched||t)&&((l=j.notNullValidator(l)).valid=!l.nullValue,(t||l.touched)&&!1===l.valid?l.showErrorMsg=!0:l.showErrorMsg=!1),(!0===a||!0===o.touched||t)&&((o=j.notNullValidator(o)).valid=!o.nullValue,(t||o.touched)&&!1===o.valid?o.showErrorMsg=!0:o.showErrorMsg=!1),"current-stock"===m.value&&((!0===a||!0===r.touched||t)&&(console.log("buyDate",r),(r=j.notNullValidator(r)).valid=!r.nullValue,(t||r.touched)&&!1===r.valid?r.showErrorMsg=!0:r.showErrorMsg=!1),(!0===a||!0===c.touched||t)&&((c=j.notNullValidator(c)).valid=!c.nullValue,(t||c.touched)&&!1===c.valid?c.showErrorMsg=!0:c.showErrorMsg=!1),(!0===a||!0===i.touched||t)&&((i=j.notNullValidator(i)).valid=!i.nullValue,(t||i.touched)&&!1===i.valid?i.showErrorMsg=!0:i.showErrorMsg=!1)),"jangad"!==m.value&&"sold"!==m.value||((!0===a||!0===u.touched||t)&&((u=j.notNullValidator(u)).valid=!u.nullValue,(t||u.touched)&&!1===u.valid?u.showErrorMsg=!0:u.showErrorMsg=!1),(!0===a||!0===s.touched||t)&&((s=j.notNullValidator(s)).valid=!s.nullValue,(t||s.touched)&&!1===s.valid?s.showErrorMsg=!0:s.showErrorMsg=!1)),"jangad"===m.value&&(!0===a||!0===d.touched||t)&&((d=j.notNullValidator(d)).valid=!d.nullValue,(t||d.touched)&&!1===d.valid?d.showErrorMsg=!0:d.showErrorMsg=!1);var h=l.valid&&o.valid;return"current-stock"===m.value&&(h=h&&i.valid&&c.valid&&r.valid),"jangad"!==m.value&&"sold"!==m.value||(h=h&&u.valid&&s.valid),"jangad"===m.value&&(h=h&&d.valid),console.log("isFormValid",h),console.log("controls",n),e.setState({controls:n,isFormValid:h}),h},e.getSelectedBuyPersonControl=function(a){var t=e.state.controls;t.buyPersonId=a,console.log("person",t),e.setState({controls:t})},e.getSelectedSellPersonControl=function(a){var t=e.state.controls;t.sellPersonId=a,console.log("person",t),e.setState({controls:t})},e.getContacts=function(){Y.getContacts(1,10,null,!1).then((function(a){console.log("data",a),a.data&&a.data.data&&a.data.data.contacts&&e.setState({contacts:a.data.data.contacts})})).catch((function(e){console.log("e",e)}))},e.saveDetail=function(){var a=e.state.controls,t=a.stockId,n=a.buyDate,l=a.buyPersonId,o=a.buyPrice,r=a.sellDate,c=a.sellPrice,s=a.sellPersonId,u=a.status,i=a.weight,d=a.buyPricePer,m=a.sellPricePer;if(!0!==Pe&&!1!==e.handleValidation(!1,!0)){var h=null,p=null;n.value&&(n.value.setHours(5,30,0,0),console.log("buyDate",n),h=n.value.toISOString()),r.value&&(r.value.setHours(5,30,0,0),console.log("sellDate",r),p=r.value.toISOString()),console.log("controls",a);var g={stockId:t.value,buyDate:h,buyPersonId:l.value,buyPrice:o.value,sellDate:p,sellPersonId:s.value,sellPrice:c.value,status:u.value,weight:i.value,buyPricePer:d.value,sellPricePer:m.value};e.setState({isLoading:!0}),Pe=!0,Ee.addStock(g).then((function(a){var t=a.data&&a.data.message?a.data.message:null;t&&te.openAlert("Person",t,"success"),e.setState({isLoading:!1}),Pe=!1,e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1}),Pe=!1}))}},e.updateStock=function(){var a=e.props.stockData,t=e.state.controls,n=t.stockId,l=t.buyDate,o=t.buyPersonId,r=t.buyPrice,c=t.sellDate,s=t.sellPrice,u=t.sellPersonId,i=t.status,d=t.weight,m=t.buyPricePer,h=t.sellPricePer;if(!1!==e.handleValidation(!1,!0)){console.log("controls",t);var p=null,g=null;l.value&&(l.value.setHours(5,30,0,0),console.log("buyDate",l),p=l.value.toISOString()),c.value&&(c.value.setHours(5,30,0,0),console.log("sellDate",c),g=c.value.toISOString());var v={stockId:n.value,buyDate:p,buyPersonId:o.value,buyPrice:r.value,sellDate:g,sellPersonId:u.value,sellPrice:s.value,status:i.value,weight:d.value,id:a.uuid,buyPricePer:m.value,sellPricePer:h.value};e.setState({isLoading:!0}),Ee.updateStock(v).then((function(a){var t=a.data&&a.data.message?a.data.message:null;e.setState({isLoading:!1}),t&&te.openAlert("Person",t,"success"),e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1});var t=a.response&&a.response.data&&a.response.data.message?a.response.data.message:"Something went wrong";te.openAlert("Person",t,"error")}))}},e.buyPersonIdContainer=l.a.createRef(),e.sellPersonIdContainer=l.a.createRef(),e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.stockData;if(console.log("stockData",e),e){var a=this.state.controls,t=a.stockId,n=a.buyDate,l=a.buyPrice,o=a.buyPersonId,r=a.sellDate,c=a.sellPersonId,s=a.sellPrice,u=a.status,i=a.weight,d=a.buyPricePer,m=a.sellPricePer;t.value=e.stock_id,n.value=new Date(e.buy_date),l.value=e.buy_price,o.value=e.buy_person_id,e.sell_date&&(r.value=new Date(e.sell_date)),s.value=e.sell_price,c.value=e.sell_person_id,u.value=e.status,i.value=e.weight,d.value=e.buy_price_per,m.value=e.sell_price_per,this.setState({controls:a})}this.getContacts()}},{key:"render",value:function(){var e=this,a=this.props.stockData,t=this.state,n=t.controls,o=(t.contacts,n.stockId),r=n.buyDate,c=n.buyPersonId,s=n.buyPrice,u=n.sellDate,i=n.sellPrice,d=n.sellPersonId,m=n.status,g=n.weight,v=n.buyPricePer,E=n.sellPricePer,f=!(!a||!a.uuid);return l.a.createElement(X.a,{isOpen:this.props.show,toggle:this.props.closeModal},l.a.createElement($.a,{toggle:this.props.closeModal},"Add Stock"),l.a.createElement(q.a,null,Pe&&l.a.createElement(Z,null),l.a.createElement(D.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"name"},"Stock Id"),l.a.createElement(I.a,{type:"text",id:"stockId",name:"stockId",value:o.value,onChange:this.handleInputChange,disabled:f}),o.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter name"))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"weight"},"Weight"),l.a.createElement(I.a,{type:"number",id:"weight",name:"weight",value:g.value,onChange:this.handleInputChange}),g.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter weight")))),l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"status"},"Status"),l.a.createElement("select",{name:"status",onChange:this.handleInputChange,value:m.value},ke.map((function(e,a){return f||0===a?l.a.createElement("option",{value:e.value},e.key):void 0})))))),l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"password",className:"field-title"},"Buy Date"),l.a.createElement("div",null,l.a.createElement(T.a,{className:"width-100",onClick:function(a){return e.buyDate.state.open&&a.preventDefault()}},l.a.createElement(fe.a,null,l.a.createElement(Se.a,{className:"form-control calendar-input",selected:r.value,onChange:this.handleDateChange.bind(this,"buyDate"),showMonthDropdown:!0,ref:function(a){return e.buyDate=a},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,placeholderText:"Select",shouldCloseOnSelect:!0,dropdownMode:"select"}))),r.showErrorMsg&&l.a.createElement("div",{className:"error"},"*Please enter buy date")))),l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"buyPrice"},"Buy Price"),l.a.createElement(I.a,{type:"number",id:"buyPrice",name:"buyPrice",value:s.value,onChange:this.handleInputChange}),s.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter buy price"))),l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"buyPricePer"},"Buy Price Per"),l.a.createElement("select",{name:"buyPricePer",onChange:this.handleInputChange,value:v.value},Oe.map((function(e,a){return l.a.createElement("option",{value:e.value},e.key)}))))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"buyPersonId"},"Buy Contact"),l.a.createElement(be,{ref:this.buyPersonIdContainer,person:c,getSelectedPersonControl:this.getSelectedBuyPersonControl}),c.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter buy contact")))),"current-stock"!==m.value&&l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"password",className:"field-title"},"Sell Date"),l.a.createElement("div",null,l.a.createElement(T.a,{className:"width-100",onClick:function(a){return e.sellDate.state.open&&a.preventDefault()}},l.a.createElement(fe.a,null,l.a.createElement(Se.a,{className:"form-control calendar-input",selected:u.value,onChange:this.handleDateChange.bind(this,"sellDate"),showMonthDropdown:!0,ref:function(a){return e.sellDate=a},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,placeholderText:"Select",shouldCloseOnSelect:!0,dropdownMode:"select"}))),u.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter sell date")))),l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"sellPrice"},"Sell Price"),l.a.createElement(I.a,{type:"number",id:"sellPrice",name:"sellPrice",value:i.value,onChange:this.handleInputChange}),i.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter sell price"))),l.a.createElement(p.a,{sm:"4"},l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"sellPricePer"},"Price"),l.a.createElement("select",{name:"sellPricePer",onChange:this.handleInputChange,value:E.value},Oe.map((function(e,a){return l.a.createElement("option",{value:e.value},e.key)}))))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"sellPersonId"},"Sell Contact"),l.a.createElement(be,{ref:this.sellPersonIdContainer,person:d,getSelectedPersonControl:this.getSelectedSellPersonControl}),d.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter sell contact")))),l.a.createElement(_.a,{onClick:a?this.updateStock:this.saveDetail},"Save"))))}}]),t}(n.Component),Me=(t(238),[{key:"All",value:"all"},{key:"Current Stock",value:"current-stock"},{key:"Jangad",value:"jangad"},{key:"Sold",value:"sold"}]),De=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={stocks:[],downloadExcelFields:["all"],selectedStockToUpdate:null,isAddContactModalOpen:!1,isAddStockModalOpen:!1,isUploadContactModalOpen:!1,page:1,totalRecords:0,search:null,controls:{downloadCheckbox:{value:["all"],valid:null,touched:!1,required:!0,showErrorMsg:!1}},selectedStatus:"all"},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value;console.log("controlName");var l=n,o={page:1};o[t]=l,console.log("obj",o),e.setState(o,(function(){e.getStocks()}))},e.getStocks=function(a,t,n){var l=e.state,o=l.controls,r=l.selectedStatus,c={downloadExcelFields:o.downloadCheckbox.value};Ee.getStocks(a,10,t,n,c,r).then((function(a){if(console.log(a.data),n)a.data.data&&a.data.data.file&&me(a.data.data.file);else{var t=a.data.data.stocks,l=a.data.data.count;e.setState({stocks:t,totalRecords:l})}})).catch((function(e){}))},e.openAddStockModal=function(a){e.setState({isAddStockModalOpen:!0,selectedStockToUpdate:a})},e.closeAddStockModal=function(a){console.log("closing modal"),e.setState({isAddStockModalOpen:!1,selectedStockToUpdate:null}),a&&e.getStocks(e.state.page)},e.deleteStock=function(a){Ee.deleteStock(a).then((function(a){e.setState({page:1},(function(){e.getStocks(1,e.state.search)}))})).catch((function(e){pe("",e)}))},e.handlePageChange=function(a){e.setState({page:a}),e.getStocks(a,e.state.search)},e.handleSearchInput=function(a){var t=a.target.value;e.setState({search:t}),e.searchContactData(t)},e.searchContactData=function(a){e.setState({page:1}),e.getStocks(1,a)},e.downloadExcel=function(){e.getStocks(e.state.page,e.state.search,!0)},e.handledownloadCheckboxInput=function(a){var t=e.state.controls,n=t.downloadCheckbox,l=n.value,o=l.indexOf(a);o<0?"all"!==a&&l&&"all"===l[0]||"all"===a?l=[a]:l.push(a):l.splice(o,1),n.value=l,e.setState({controls:t})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getStocks(this.state.page)}},{key:"render",value:function(){var e=this,a=this.state,t=a.stocks,n=a.selectedStockToUpdate,o=(a.isAddContactModalOpen,a.page),r=a.totalRecords,c=a.search,s=a.controls,u=a.isAddStockModalOpen,i=a.selectedStatus,d=(s.downloadCheckbox,t.map((function(a){return l.a.createElement("tr",null,l.a.createElement("td",null,a.stock_id),l.a.createElement("td",null,a.status),l.a.createElement("td",null,a.weight),l.a.createElement("td",null,a.buy_person_name),l.a.createElement("td",null,l.a.createElement("div",null,de(a.buy_date))),l.a.createElement("td",null,a.buy_price),l.a.createElement("td",null,a.buy_price_per),l.a.createElement("td",null,a.sell_person_name),l.a.createElement("td",null,a.sell_date&&de(a.sell_date)),l.a.createElement("td",null,a.sell_price),l.a.createElement("td",null,a.sell_price_per),l.a.createElement("td",null,l.a.createElement(G.a,{onClick:e.openAddStockModal.bind(e,a),icon:"md-create",fontSize:"16px",color:"#fdbb1f"}),"\xa0",!(a.sell_person_name||a.sell_date||a.sell_price)&&l.a.createElement(G.a,{onClick:e.deleteStock.bind(e,a.uuid),icon:"md-trash",fontSize:"16px",color:"#fdbb1f"})))})));return l.a.createElement("div",{id:"contact"},u&&l.a.createElement(Ae,{show:u,closeModal:this.closeAddStockModal,stockData:n}),l.a.createElement(h.a,null,l.a.createElement(p.a,{xl:"12"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"3"},l.a.createElement(T.a,{for:"status"},"Search"),l.a.createElement(I.a,{name:"search",id:"search",type:"text",placeholder:"Enter person name,phone numeber or company",onChange:this.handleSearchInput,value:c})),l.a.createElement(p.a,{sm:"2"},l.a.createElement(T.a,{for:"status"},"Status"),l.a.createElement("select",{name:"selectedStatus",onChange:this.handleInputChange,value:i},Me.map((function(e){return l.a.createElement("option",{value:e.value},e.key)})))),l.a.createElement(p.a,{className:"text-align-right"},l.a.createElement("span",{className:"download-link",onClick:this.openAddStockModal.bind(this,null)},"Add Stock"),"\xa0\xa0")),l.a.createElement(R.a,{className:"width-100 margin-top-10"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Stock Id"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Weight"),l.a.createElement("th",null,"Buy Contact"),l.a.createElement("th",null,"Buy Date"),l.a.createElement("th",null,"Buy Price"),l.a.createElement("th",null,"Buy Price Per"),l.a.createElement("th",null,"Sell Contact"),l.a.createElement("th",null,"Sell Date"),l.a.createElement("th",null,"Sell Price"),l.a.createElement("th",null,"Sell Price per"),l.a.createElement("th",null,"Action"))),l.a.createElement("tbody",null,d)),l.a.createElement(J,{margin:2,page:o,pageSize:10,totalRecords:r,onPageChange:this.handlePageChange}))))))}}]),t}(n.Component),Ne=P.routes.API_URL,Te=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"addTransaction",value:function(e){return b("POST","".concat(Ne).concat(P.routes.ADD_TRANSACTION),null,e,null)}},{key:"addOtherTransaction",value:function(e){return b("POST","".concat(Ne).concat(P.routes.ADD_OTHER_TRANSACTION),null,e,null)}},{key:"updateTransaction",value:function(e){return b("POST","".concat(Ne).concat(P.routes.UPDATE_TRANSACTION),null,e,null)}},{key:"getTransactions",value:function(e,a,t,n,l,o,r){var c="?";return e&&(c+="page=".concat(e,"&")),a&&(c+="limit=".concat(a,"&")),t&&(c+="search=".concat(t,"&")),r&&(c+="mode=".concat(r,"&")),n&&(c+="downloadExcel=".concat(n,"&")),o&&(c+="u=".concat(o,"&")),b("POST","".concat(Ne).concat(P.routes.GET_TRANSACTIONS).concat(c),null,l,null)}},{key:"getCloseAmountToday",value:function(){return b("GET","".concat(Ne).concat(P.routes.GET_CLOSE_AMOUNT_TODAY),null,null,null)}}]),e}(),Ie=!1,_e={transactionDate:{value:"",valid:null,touched:!1,nullValue:null},person:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},debitContactName:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},creditContactName:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},type:{value:"credit",valid:null,touched:!1,nullValue:null,invalidPassword:null},mode:{value:"cash",valid:null,touched:!1,nullValue:null,invalidPassword:null},note:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null},amount:{value:"",valid:null,touched:!1,nullValue:null,invalidPassword:null}},je=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).state={contacts:[],controls:JSON.parse(JSON.stringify(_e)),isLoading:!1,personName:null,search:null,showPersonList:!1},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l=e.state.controls;l[t].value=n,l[t].touched=!0,e.setState({controls:l})},e.handleDateChange=function(a,t){console.log("e",t),console.log("controlName",a);var n=e.state.controls,l=n[a];l.value=t,l.touched=!0,e.setState({controls:n})},e.handleValidation=function(a,t){var n=e.state,l=n.controls,o=n.isFormValid,r=(l.transactionDate,l.type),c=l.mode,s=(l.note,l.amount),u=l.person;return"other"!==c.value&&(!0===a||!0===u.touched||t)&&((u=j.notNullValidator(u)).valid=!u.nullValue,(t||u.touched)&&!1===u.valid?u.showErrorMsg=!0:u.showErrorMsg=!1),(!0===a||!0===r.touched||t)&&((r=j.notNullValidator(r)).valid=!r.nullValue,(t||r.touched)&&!1===r.valid?r.showErrorMsg=!0:r.showErrorMsg=!1),(!0===a||!0===c.touched||t)&&((c=j.notNullValidator(c)).valid=!c.nullValue,(t||c.touched)&&!1===c.valid?c.showErrorMsg=!0:c.showErrorMsg=!1),(!0===a||!0===s.touched||t)&&((s=j.notNullValidator(s)).valid=!s.nullValue,(t||s.touched)&&!1===s.valid?s.showErrorMsg=!0:s.showErrorMsg=!1),o=!0===r.valid&&!0===c.valid&&!0===s.valid,console.log("isFormValid",o),console.log("controls",l),e.setState({controls:l,isFormValid:o}),o},e.getContacts=function(){var a=e.state.personName;Y.getContacts(1,1e6,a,!1).then((function(a){console.log("data",a),a.data&&a.data.data&&a.data.data.contacts&&e.setState({contacts:a.data.data.contacts})})).catch((function(e){console.log("e",e)}))},e.saveDetail=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e.state.controls,n=t.transactionDate,l=t.type,o=t.mode,r=t.amount,c=t.note,s=t.person,u=t.debitContactName,i=t.creditContactName,d=e.props.transactionData;if(!0!==Ie){var m=e.handleValidation(!1,!0);if(!1!==m){console.log("controls",t);e.props.contactData;var h=null;n.value&&(n.value.setHours(5,30,0,0),h=n.value.toISOString());var p={transactionDate:h,type:l.value,mode:o.value,amount:r.value,note:c.value,personId:s.value};console.log(o.value,a),!0!==a&&"other"===o.value&&(delete p.type,delete p.personId,p.debitPersonId=u.value,p.creditPersonId=i.value),!0===a&&(p.id=d.uuid),e.setState({isLoading:!0}),Ie=!0;(!0===a?Te.updateTransaction(p):"other"===o.value?Te.addOtherTransaction(p):Te.addTransaction(p)).then((function(a){var t=a.data&&a.data.message?a.data.message:null;t&&te.openAlert("Person",t,"success"),e.setState({isLoading:!1}),Ie=!1,e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1}),Ie=!1}))}}},e.handleClickOutside=function(a){e.container.current&&!e.container.current.contains(a.target)&&(console.log("setting to hide"),e.setState({showPersonList:!1}))},e.getSelectedPersonControl=function(a,t){var n=e.state.controls;n[t]=a,e.setState({controls:n})},e.container=l.a.createRef(),e.debitPersoncontainer=l.a.createRef(),e.creditPersonContainer=l.a.createRef(),e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.transactionData;if(console.log("transactionData",e),this.getContacts(),e){var a=this.state.controls,t=a.transactionDate,n=a.type,l=a.mode,o=a.note,r=a.amount,c=a.person;t.value=new Date(e.transaction_date),e.credit&&(n.value="credit",r.value=e.credit),e.debit&&(n.value="debit",r.value=e.debit),l.value=e.mode,o.value=e.note,c.value=e.person_id,this.setState({controls:a})}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,a=this.props.transactionData,t=this.state,n=t.controls,o=t.isLoading,r=(t.contacts,t.personName,t.personUuid,t.showPersonList,n.transactionDate),c=n.mode,s=n.type,u=n.amount,i=n.note,d=n.person,m=n.debitContactName,g=n.creditContactName;return l.a.createElement(X.a,{isOpen:this.props.show,toggle:this.props.closeModal},l.a.createElement($.a,{toggle:this.props.closeModal},"Add Transaction"),l.a.createElement(q.a,null,o&&l.a.createElement(Z,null),l.a.createElement(D.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"mode"},"Mode"),l.a.createElement("div",null,l.a.createElement("select",{name:"mode",onChange:this.handleInputChange,value:c.value},l.a.createElement("option",{value:"cash"},"Cash"),l.a.createElement("option",{value:"other"},"Other")),c.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter phone number")))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"password",className:"field-title"},"Transaction Date"),l.a.createElement("div",null,l.a.createElement(T.a,{className:"width-100",onClick:function(a){return e.transactionDate.state.open&&a.preventDefault()}},l.a.createElement(fe.a,null,l.a.createElement(Se.a,{className:"form-control calendar-input",selected:r.value,onChange:this.handleDateChange.bind(this,"transactionDate"),showMonthDropdown:!0,ref:function(a){return e.transactionDate=a},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,placeholderText:"Select",shouldCloseOnSelect:!0,dropdownMode:"select"}))),r.showErrorMsg&&l.a.createElement("div",{className:"error"}))))),l.a.createElement(h.a,null,!("other"===c.value&&!a)&&l.a.createElement(p.a,null,l.a.createElement(T.a,{for:"person"},"Contact Name"),l.a.createElement(be,{ref:this.container,person:d,controlName:"person",getSelectedPersonControl:this.getSelectedPersonControl}),d.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please select person name")),"other"===c.value&&!a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement(T.a,{for:"debitContactName"},"Debit Contact Name"),l.a.createElement(be,{ref:this.debitPersoncontainer,person:m,controlName:"debitContactName",getSelectedPersonControl:this.getSelectedPersonControl}),m.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please select person name")),l.a.createElement(p.a,null,l.a.createElement(T.a,{for:"creditContactName"},"Credit Contact Name"),l.a.createElement(be,{ref:this.creditPersonContainer,person:g,controlName:"creditContactName",getSelectedPersonControl:this.getSelectedPersonControl}),g.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please select person name")))),!("other"===c.value&&!a)&&l.a.createElement(h.a,{className:"margin-top-5"},l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"type"},"Type"),l.a.createElement("div",null,l.a.createElement("select",{name:"type",onChange:this.handleInputChange,value:s.value},l.a.createElement("option",{value:"credit"},"Credit"),l.a.createElement("option",{value:"debit"},"Debit")),s.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter phone number"))))),l.a.createElement(h.a,{className:"margin-top-5"},l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"amount"},"Amount"),l.a.createElement(I.a,{type:"number",id:"amount",name:"amount",value:u.value,onChange:this.handleInputChange}),u.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter valid amount"))),l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"note"},"Note"),l.a.createElement(I.a,{type:"text",id:"note",name:"note",value:i.value,onChange:this.handleInputChange}),i.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter valid company name")))),l.a.createElement(_.a,{onClick:a?this.saveDetail.bind(this,!0):this.saveDetail},"Save"))))}}]),t}(n.Component),xe=(t(239),function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={transactions:[],downloadExcelFields:["all"],selectedContactToUpdate:null,selectedTransactionToUpdate:null,isAddContactModalOpen:!1,isAddTransactionModalOpen:!1,isUploadContactModalOpen:!1,page:1,totalRecords:0,search:null,controls:{downloadCheckbox:{value:["all"],valid:null,touched:!1,required:!0,showErrorMsg:!1}},mode:"all"},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l={page:1};l[t]=n,console.log("obj",l),e.setState(l,(function(){e.getTransactions()}))},e.getTransactions=function(a){var t=e.state,n=t.controls,l=t.page,o=t.search,r=t.mode;console.log("this.props",e.props);var c=null;e.props.location&&e.props.location.contactData&&(c=e.props.location.contactData.uuid);var s={downloadExcelFields:n.downloadCheckbox.value};Te.getTransactions(l,10,o,a,s,c,r).then((function(t){if(console.log(t.data),a)t.data.data&&t.data.data.file&&me(t.data.data.file);else{var n=t.data.data.transaction,l=t.data.data.count;e.setState({transactions:n,totalRecords:l})}})).catch((function(e){}))},e.openAddContactModal=function(a){e.setState({isAddContactModalOpen:!0,selectedContactToUpdate:a})},e.closeAddContactModal=function(a){console.log("closing modal"),e.setState({isAddContactModalOpen:!1,selectedContactToUpdate:null}),a&&e.getContacts(e.state.page)},e.openAddTransactionModal=function(a){e.setState({isAddTransactionModalOpen:!0,selectedTransactionToUpdate:a})},e.closeAddTransactionModal=function(a){console.log("closing modal"),e.setState({isAddTransactionModalOpen:!1,selectedTransactionToUpdate:null}),a&&e.getTransactions()},e.openUploadContactModal=function(){e.setState({isUploadContactModalOpen:!0})},e.closeUploadContactModal=function(a){e.setState({isUploadContactModalOpen:!1}),a&&e.getContacts(e.state.page)},e.handlePageChange=function(a){e.setState({page:a},(function(){e.getTransactions()}))},e.handleSearchInput=function(a){var t=a.target.value;e.setState({page:1,search:t},(function(){e.getTransactions()}))},e.downloadExcel=function(){e.getContacts(e.state.page,e.state.search,!0)},e.handledownloadCheckboxInput=function(a){var t=e.state.controls,n=t.downloadCheckbox,l=n.value,o=l.indexOf(a);o<0?"all"!==a&&l&&"all"===l[0]||"all"===a?l=[a]:l.push(a):l.splice(o,1),n.value=l,e.setState({controls:t})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getTransactions()}},{key:"render",value:function(){var e=this,a=this.state,t=a.transactions,n=(a.selectedContactToUpdate,a.isAddContactModalOpen,a.page),o=a.totalRecords,r=a.search,c=a.controls,s=(a.isUploadContactModalOpen,a.isAddTransactionModalOpen),u=a.selectedTransactionToUpdate,i=a.mode,d=(c.downloadCheckbox,t.map((function(a){return l.a.createElement("tr",null,l.a.createElement("td",null,a.name),l.a.createElement("td",null,de(a.transaction_date)),l.a.createElement("td",null,l.a.createElement("div",null,a.credit)),l.a.createElement("td",null,a.debit),l.a.createElement("td",null,a.mode),l.a.createElement("td",null,a.note),l.a.createElement("td",null,!("stock"===a.mode||!a.person_id)&&l.a.createElement(G.a,{onClick:e.openAddTransactionModal.bind(e,a),icon:"md-create",fontSize:"16px",color:"#fdbb1f"})))})));return l.a.createElement("div",{id:"contact"},s&&l.a.createElement(je,{show:s,closeModal:this.closeAddTransactionModal,transactionData:u}),l.a.createElement(h.a,null,l.a.createElement(p.a,{xl:"12"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"3"},l.a.createElement(T.a,{for:"mode"},"Search"),l.a.createElement(I.a,{name:"search",id:"search",type:"text",placeholder:"Enter person name,phone numeber or company",onChange:this.handleSearchInput,value:r})),l.a.createElement(p.a,{sm:"2"},l.a.createElement(T.a,{for:"mode"},"Mode"),l.a.createElement("div",null,l.a.createElement("select",{name:"mode",onChange:this.handleInputChange,value:i},l.a.createElement("option",{value:"all"},"All"),l.a.createElement("option",{value:"cash"},"Cash"),l.a.createElement("option",{value:"check"},"Check"),l.a.createElement("option",{value:"stock"},"Stock"),l.a.createElement("option",{value:"other"},"Other")))),l.a.createElement(p.a,{className:"text-align-right"},l.a.createElement("span",{className:"download-link",onClick:this.openAddTransactionModal.bind(this,null)},"Add Transaction"),"\xa0\xa0")),l.a.createElement(R.a,{className:"width-100 margin-top-10"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Credit"),l.a.createElement("th",null,"Debit"),l.a.createElement("th",null,"Mode"),l.a.createElement("th",null,"Note"),l.a.createElement("th",null,"Actions"))),l.a.createElement("tbody",null,d)),l.a.createElement(J,{margin:2,page:n,pageSize:10,totalRecords:o,onPageChange:this.handlePageChange}))))))}}]),t}(n.Component)),Ve=P.routes.ADD_OPENING_BALANCE,Ue=P.routes.UPDATE_OPENING_BALANCE,Le=P.routes.GET_TODAY_OPENING_BALANCE,Be=P.routes.API_URL,Re=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"addOpeningBalance",value:function(e){return b("POST","".concat(Be).concat(Ve),null,e,null)}},{key:"updateOpeningBalance",value:function(e){return b("POST","".concat(Be).concat(Ue),null,e,null)}},{key:"getTodayOpeningBalance",value:function(e){return b("GET","".concat(Be).concat(Le),null,null,null)}}]),e}(),Fe=P.routes.API_URL,Ge=P.routes.GET_STOCK_AND_AMT_WITH_DALAL,ze=P.routes.GET_ACCOUNT_SUMMARY,He=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"getStockAndAmtWithDalal",value:function(e){var a=he(e);return b("GET","".concat(Fe).concat(Ge).concat(a),null,null,null)}},{key:"getAccountSummary",value:function(e){var a=he(e);return b("GET","".concat(Fe).concat(ze).concat(a),null,null,null)}}]),e}(),We=!1,Je={amount:{value:"",valid:null,touched:!1,nullValue:null}},Ke=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;return Object(s.a)(this,t),(e=a.call(this)).state={controls:JSON.parse(JSON.stringify(Je)),isLoading:!1},e.handleInputChange=function(a){var t=a.target.name,n=a.target.value,l=e.state.controls;l[t].value=n,l[t].touched=!0,e.setState({controls:l})},e.handleValidation=function(a,t){var n=e.state,l=n.controls,o=n.isFormValid,r=l.amount;return(!0===a||!0===r.touched||t)&&((r=j.notNullValidator(r)).valid=!r.nullValue,(t||r.touched)&&!1===r.valid?r.showErrorMsg=!0:r.showErrorMsg=!1),o=!0===r.valid,console.log("isFormValid",o),console.log("controls",l),e.setState({controls:l,isFormValid:o}),o},e.saveDetail=function(){var a=e.state.controls,t=a.amount;if(!0!==We&&!1!==e.handleValidation(!1,!0)){console.log("controls",a);var n={amount:t.value};e.setState({isLoading:!0}),We=!0,Re.addOpeningBalance(n).then((function(a){var t=a.data&&a.data.message?a.data.message:null;t&&te.openAlert("Opening Balance",t,"success"),e.setState({isLoading:!1}),We=!1,e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1}),We=!1}))}},e.updateOpeningBalance=function(){var a=e.props.openingBalanceData,t=e.state.controls,n=t.amount;if(!1!==e.handleValidation(!1,!0)){console.log("controls",t);var l={amount:n.value,openingBalanceId:a.uuid};e.setState({isLoading:!0}),Re.updateOpeningBalance(l).then((function(a){var t=a.data&&a.data.message?a.data.message:null;e.setState({isLoading:!1}),t&&te.openAlert("Opening Balance",t,"success"),e.props.closeModal(!0)})).catch((function(a){e.setState({isLoading:!1});var t=a.response&&a.response.data&&a.response.data.message?a.response.data.message:"Something went wrong";te.openAlert("Person",t,"error")}))}},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.openingBalanceData;if(console.log("openingBalanceData",e),e){var a=this.state.controls;a.amount.value=e.amount,this.setState({controls:a})}}},{key:"render",value:function(){var e=this.props.openingBalanceData,a=this.state,t=a.controls,n=a.isLoading,o=t.amount;return l.a.createElement(X.a,{isOpen:this.props.show,toggle:this.props.closeModal},l.a.createElement($.a,{toggle:this.props.closeModal},"Add Opening Balance"),l.a.createElement(q.a,null,n&&l.a.createElement(Z,null),l.a.createElement(D.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement(N.a,null,l.a.createElement(T.a,{for:"amount"},"Amount"),l.a.createElement(I.a,{type:"text",id:"amount",name:"amount",value:o.value,onChange:this.handleInputChange}),o.showErrorMsg&&l.a.createElement("div",{className:"error"},"* Please enter amount")))),l.a.createElement(_.a,{onClick:e?this.updateOpeningBalance:this.saveDetail},"Save"))))}}]),t}(n.Component),Ye=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={isAddOpeningBalanceModalOpen:!1,isAddOpeningBalanceButtonVisible:!1,openingBalanceData:{},selectedOpeningBalanceToUpdate:null,closingBalanceData:{},dalalData:[],searchDalal:null,pageDalal:1,pageSizeDalal:10,totalDalals:0,pageAccountSummary:1,pageSizeAccountSummary:10,totalAccountSummary:0,searchAccountSummary:null,accountSummaryData:[],isAddStockModalOpen:!1,isAddTransactionModalOpen:!1},e.openAddOpeningBalanceModal=function(a){e.setState({isAddOpeningBalanceModalOpen:!0,selectedOpeningBalanceToUpdate:a})},e.closeAddOpeningBalanceModal=function(a){e.setState({isAddOpeningBalanceModalOpen:!1,selectedOpeningBalanceToUpdate:null}),a&&e.getTodayOpeningBalance()},e.getTodayOpeningBalance=function(){Re.getTodayOpeningBalance().then((function(a){a.data.data?e.setState({openingBalanceData:a.data.data}):e.setState({isAddOpeningBalanceButtonVisible:!0}),console.error("data",a)})).catch((function(e){console.error("e",e)}))},e.getTodayCloseAmount=function(){Te.getCloseAmountToday().then((function(a){a.data.data&&e.setState({closingBalanceData:a.data.data})})).catch((function(e){}))},e.getStockAndAmtWithDalal=function(){var a=e.state,t={page:a.pageDalal,limit:a.pageSizeDalal,search:a.searchDalal};He.getStockAndAmtWithDalal(t).then((function(a){a.data.data&&a.data.data.data&&e.setState({dalalData:a.data.data.data}),a.data.data&&a.data.data.count&&e.setState({totalDalals:a.data.data.count})})).catch((function(e){}))},e.getAccountSummary=function(){var a=e.state,t={page:a.pageAccountSummary,limit:a.pageSizeAccountSummary,search:a.searchAccountSummary};He.getAccountSummary(t).then((function(a){a.data.data&&a.data.data.data&&e.setState({accountSummaryData:a.data.data.data}),a.data.data&&a.data.data.count&&e.setState({totalAccountSummary:a.data.data.count})})).catch((function(e){}))},e.handleSearchDalalInput=function(a){var t=a.target.value;e.setState({pageDalal:1,searchDalal:t},(function(){e.getStockAndAmtWithDalal()}))},e.handlePageChange=function(a){e.setState({pageDalal:a},(function(){e.getStockAndAmtWithDalal()}))},e.handleSearchAccountSummaryInput=function(a){var t=a.target.value;e.setState({pageAccountSummary:1,searchAccountSummary:t},(function(){e.getAccountSummary()}))},e.handleAccountSummaryPageChange=function(a){e.setState({pageAccountSummary:a},(function(){e.getAccountSummary()}))},e.openAddStockModal=function(a){e.setState({isAddStockModalOpen:!0,selectedStockToUpdate:a})},e.closeAddStockModal=function(a){console.log("closing modal"),e.setState({isAddStockModalOpen:!1,selectedStockToUpdate:null})},e.openAddTransactionModal=function(a){e.setState({isAddTransactionModalOpen:!0,selectedTransactionToUpdate:a})},e.closeAddTransactionModal=function(a){console.log("closing modal"),e.setState({isAddTransactionModalOpen:!1,selectedTransactionToUpdate:null})},e}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getTodayOpeningBalance(),this.getTodayCloseAmount(),this.getStockAndAmtWithDalal(),this.getAccountSummary()}},{key:"render",value:function(){var e=this.state,a=e.isAddOpeningBalanceModalOpen,t=e.isAddOpeningBalanceButtonVisible,n=e.openingBalanceData,o=void 0===n?{}:n,r=e.selectedOpeningBalanceToUpdate,c=e.closingBalanceData,s=void 0===c?{}:c,u=e.dalalData,i=void 0===u?[]:u,d=e.searchDalal,m=e.pageDalal,g=e.pageSizeDalal,v=e.searchAccountSummary,E=e.totalDalals,f=e.accountSummaryData,y=e.pageAccountSummary,S=e.pageSizeAccountSummary,C=e.totalAccountSummary,b=e.isAddStockModalOpen,P=e.isAddTransactionModalOpen,k=o.value,O=(o.uuid,s.total);s.openingBalance;return l.a.createElement("div",null,a&&l.a.createElement(Ke,{show:a,closeModal:this.closeAddOpeningBalanceModal,openingBalanceData:r}),b&&l.a.createElement(Ae,{show:b,closeModal:this.closeAddStockModal}),P&&l.a.createElement(je,{show:P,closeModal:this.closeAddTransactionModal}),l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"3"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,!t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"10"},"Opening Balance : ",k),l.a.createElement(p.a,{className:"text-align-right"},l.a.createElement("div",{onClick:this.openAddOpeningBalanceModal.bind(this,o)},l.a.createElement(G.a,{icon:"md-create",fontSize:"16px",color:"#fdbb1f"})))),l.a.createElement("div",null," ")),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:this.openAddOpeningBalanceModal.bind(this,null)},"Add Opening Balance"))))),l.a.createElement(p.a,{sm:"3"},l.a.createElement(A.a,null,l.a.createElement(M.a,null,l.a.createElement("div",null,"Current Balance : ",O)))),l.a.createElement(p.a,{sm:"6",className:"text-align-right"},l.a.createElement("button",{onClick:this.openAddStockModal.bind(this,null)},"Add Stock"),"\xa0",l.a.createElement("button",{onClick:this.openAddTransactionModal.bind(this,null)},"Add Transaction"))),l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"6"},l.a.createElement(A.a,{className:"width-100 margin-top-10"},l.a.createElement(M.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement("h4",null,"Dalal Data"))),l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"6"},l.a.createElement(I.a,{name:"search",id:"search",type:"text",placeholder:"Enter person name,phone numeber or company",onChange:this.handleSearchDalalInput,value:d}))),l.a.createElement(R.a,{className:"width-100 margin-top-10"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"190px"}},"Name"),l.a.createElement("th",null,"Stock Id"),l.a.createElement("th",null,"Total Weight"),l.a.createElement("th",null,"Total diamond piece"),l.a.createElement("th",null,"Total diamond price"))),l.a.createElement("tbody",null,i.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.stones),l.a.createElement("td",null,e.weight),l.a.createElement("td",null,e.totalStones),l.a.createElement("td",null,e.amount))})))),l.a.createElement(J,{margin:2,page:m,pageSize:g,totalRecords:E,onPageChange:this.handlePageChange})))),l.a.createElement(p.a,{sm:"6"},l.a.createElement(A.a,{className:"width-100 margin-top-10"},l.a.createElement(M.a,null,l.a.createElement(h.a,null,l.a.createElement(p.a,null,l.a.createElement("h4",null,"Account Summary"))),l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"6"},l.a.createElement(I.a,{name:"search",id:"search",type:"text",placeholder:"Enter person name,phone numeber or company",onChange:this.handleSearchAccountSummaryInput,value:v}))),l.a.createElement(R.a,{className:"width-100 margin-top-10"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Debit"),l.a.createElement("th",null,"Credit"),l.a.createElement("th",null,"Total"))),l.a.createElement("tbody",null,f.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.debit),l.a.createElement("td",null,e.credit),l.a.createElement("td",null,e.total))})))),l.a.createElement(J,{margin:2,page:y,pageSize:S,totalRecords:C,onPageChange:this.handleAccountSummaryPageChange}))))))}}]),t}(n.Component),Xe=[{exact:!0,path:"/",component:U,key:"Login"},{exact:!0,path:"/logout",component:B,key:"Logout"}],$e=[{exact:!0,path:"/contact",component:ge,key:"contact"},{exact:!0,path:"/stocks",component:De,key:"Stocks"},{exact:!0,path:"/transactions",component:xe,key:"Transactions"},{exact:!0,path:"/dashboard",component:Ye,key:"Dashboard"}],qe=function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("Router config",e)}},{key:"render",value:function(){var e=Xe.map((function(e){return l.a.createElement(g.b,{key:e.key,exact:e.exact,path:e.path,component:e.component})})),a=$e.map((function(e){return l.a.createElement(w,{key:e.key,exact:e.exact,path:e.path,component:e.component})}));return l.a.createElement(g.d,null,e,a,l.a.createElement(g.a,{from:"*",to:"/"}))}}]),t}(n.Component),Qe=(t(240),t(241),function(e){Object(i.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=a.call.apply(a,[this].concat(l))).state={updateHeader:"login"},e}return Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("nextProps",e);var a=e.headerReducer&&e.headerReducer.header?e.headerReducer.header:"login";this.setState({updateHeader:a})}},{key:"render",value:function(){var e=this.state.updateHeader;console.log("updateHeader",e);var a=C.getToken();return l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement("header",{style:{height:"50px"}},l.a.createElement(h.a,null,l.a.createElement(p.a,{sm:"2",style:{lineHeight:"67px"}},l.a.createElement("span",{style:{fontWeight:"bold",fontSize:"20px",paddingLeft:"20px"}},"AV&Co.")),a&&l.a.createElement(n.Fragment,null,l.a.createElement(p.a,{sm:"8",className:"text-align-right"},l.a.createElement(m.b,{exact:!0,activeClassName:"active",className:"nav-link",to:"/dashboard"},"Dashboard"),l.a.createElement(m.b,{exact:!0,activeClassName:"active",className:"nav-link",to:"/contact"},"Contact"),l.a.createElement(m.b,{exact:!0,activeClassName:"active",className:"nav-link",to:"/stocks"},"Stock"),l.a.createElement(m.b,{exact:!0,activeClassName:"active",className:"nav-link",to:"/transactions"},"Transactions")),l.a.createElement(p.a,{sm:"2",className:"text-align-right"},l.a.createElement(m.b,{exact:!0,activeClassName:"active",className:"nav-link",to:"/logout"},"Logout"))))),l.a.createElement("hr",null),l.a.createElement(qe,null)))}}]),t}(n.Component)),Ze=Object(c.b)((function(e){return{headerReducer:e.headerReducer}}))(Qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(242),t(243);var ea=t(32),aa=t(120),ta={header:null},na=Object(ea.c)({headerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_HEADER_MENUS":return Object(aa.a)({},e,{header:a.payload});default:return e}}}),la=[t(117).a,function(e){return function(e){return function(a){console.log("Middleware triggered:",a),e(a)}}}],oa="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ea.d,ra=Object(ea.e)(na,{},oa(ea.a.apply(void 0,la)));r.a.render(l.a.createElement(c.a,{store:ra},l.a.createElement(Ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.24381230.chunk.js.map